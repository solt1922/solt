<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>警備員の説教部屋</title>
<style>
  body { font-family: Arial, sans-serif; background:#222; color: white; margin: 20px; }
  #chatbox {
    max-width: 500px; margin: auto;
    background: #333; padding: 20px;
    border-radius: 10px; box-shadow: 0 0 10px #000;
  }
  #messages {
    height: 300px; overflow-y: auto;
    border: 1px solid #444; padding: 10px;
    background: #111; border-radius: 5px;
  }
  .message { margin: 10px 0; }
  .user { color: #00ccff; }
  .keibi { color: #ff5050; }
  input[type="text"] {
    width: 80%; padding: 10px; margin-top: 10px;
    border-radius: 5px; border: 1px solid #555; background: #222; color: white;
  }
  button {
    padding: 10px 15px; margin: 10px 5px 0 0;
    border-radius: 5px; border: none; background: #ff5050; color: white;
    cursor: pointer;
  }
  button:hover {
    background: #e64545;
  }
  #reflection-form {
    margin-top: 15px;
  }
  textarea {
    width: 100%; border-radius: 5px;
    background: #222; color: white;
    padding: 10px; border: 1px solid #555;
  }
</style>
</head>
<body>
  <div id="chatbox">
    <h2>警備員の説教部屋</h2>
    <div id="messages"></div>
    <input type="text" id="input" placeholder="反省の言葉を述べなさい…" autofocus />
    <button onclick="sendMessage()">送信</button>
    <button onclick="showReflectionForm()">📝 反省文を書く</button>

    <div id="reflection-form" style="display: none;">
      <textarea id="reflection-text" rows="4" placeholder="ここに反省文を書きなさい…"></textarea>
      <button onclick="submitReflection()">提出する</button>
    </div>
  </div>

<script>
const messages = document.getElementById('messages');
const input = document.getElementById('input');

function appendMessage(text, className) {
  const div = document.createElement('div');
  div.className = 'message ' + className;
  div.textContent = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

function getRandom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function getKeibiResponse(msg) {
  msg = msg.toLowerCase();

  const vulgarWords = ["ち○こ", "ま○こ", "ボロン", "ケツ", "脱げ", "舐めろ", "セックス", "乳", "勃起"];
  const offensiveWords = ["殺す", "死ね", "ぶっ殺す", "変態", "くそ", "ふざけ", "うんこ", "ざけんな"];

  const isVulgar = vulgarWords.some(word => msg.includes(word));
  const isOffensive = offensiveWords.some(word => msg.includes(word));

  if (isVulgar) {
    return getRandom([
      "……下品にも程があるぞ。",
      "そういう言葉は口にするなって言ってるだろうが！",
      "お前の語彙力が心配になるぞ、マジで。",
      "そんな発言をここで吐くな、恥を知れ。"
    ]);
  }

  if (isOffensive) {
    return getRandom([
      "貴様、誰に向かって口を利いている！",
      "暴言は即アウト。説教追加な。",
      "お前、またやったな？根性叩き直すぞ。",
      "その暴言、録音済みだ。覚悟しろ。"
    ]);
  }

  if (msg.includes("ごめんなさい") || msg.includes("反省")) {
    return getRandom([
      "反省してるなら態度で示してもらおうか。",
      "反省文を3枚書いて提出だ。",
      "その程度の謝罪では済まされないぞ。",
      "声が小さい！もっと大きく反省の意を表せ！"
    ]);
  }

  if (msg.includes("許して") || msg.includes("ゆるして")) {
    return getRandom([
      "簡単に許されると思うなよ？",
      "……まあ、今回は見逃してやろう。",
      "許しを乞う前にやるべきことがあるはずだ。",
      "条件付きでなら許す。次はないと思え。"
    ]);
  }

  if (msg.includes("なんで") || msg.includes("どうして")) {
    return getRandom([
      "己の行動をよく思い出してみろ。",
      "理由は貴様の言動すべてにある。",
      "規則に従わぬ者に理由など不要だ。",
      "言わせるな…恥を知れ。"
    ]);
  }

  if (msg.includes("黙れ") || msg.includes("うるさい")) {
    return getRandom([
      "反省する気がないようだな？追加で30分だ。",
      "敬意の欠片もないな……やり直しだ。",
      "口答えか？よし、説教2倍モード突入だ。",
      "貴様、今なんと言った？"
    ]);
  }

  return getRandom([
    "黙って聞け。ここは説教部屋だ。",
    "余計なことは言うな。反省だけしていろ。",
    "こっちは暇じゃない。早く改心しろ。",
    "おしゃべりの時間じゃないぞ。真面目にやれ。",
    "まずは落ち着け。深呼吸からだ。"
  ]);
}

function sendMessage() {
  const text = input.value.trim();
  if (!text) return;
  appendMessage('あなた: ' + text, 'user');
  input.value = '';

  setTimeout(() => {
    const reply = getKeibiResponse(text);
    appendMessage('警備員: ' + reply, 'keibi');
  }, 500);
}

function showReflectionForm() {
  document.getElementById('reflection-form').style.display = 'block';
}

function submitReflection() {
  const text = document.getElementById('reflection-text').value.trim();
  if (!text) {
    alert("反省文が空です！");
    return;
  }

  appendMessage("あなた（反省文）: " + text, 'user');
  document.getElementById('reflection-text').value = '';
  document.getElementById('reflection-form').style.display = 'none';

  const vulgarWords = ["ち○こ", "ま○こ", "ボロン", "ケツ", "脱げ", "舐めろ", "セックス", "乳", "勃起"];
  const offensiveWords = ["殺す", "死ね", "ぶっ殺す", "変態", "くそ", "ふざけ", "うんこ", "ざけんな"];

  const isVulgar = vulgarWords.some(word => text.includes(word));
  const isOffensive = offensiveWords.some(word => text.includes(word));

  setTimeout(() => {
    if (isVulgar) {
      appendMessage("警備員: " + getRandom([
        "おい、その反省文……下ネタ書く場所じゃねぇぞ！",
        "内容が不適切だ。ふざけてるのか？",
        "反省文を下品な言葉で汚すな。",
        "ここは下ネタ提出箱じゃない。やり直せ。"
      ]), 'keibi');
    } else if (isOffensive) {
      appendMessage("警備員: " + getRandom([
        "暴言反省文！？ふざけるな！",
        "謝罪する気があるとは思えん。説教倍な。",
        "その文章、挑発だと判断する。処理追加だ。",
        "暴言を反省文に混ぜるな。即却下。"
      ]), 'keibi');
    } else {
      appendMessage("警備員: " + getRandom([
        "ふむ、よく書けている。今回は見逃してやろう。",
        "その反省文ではまだ足りん。もっと真剣に書け！",
        "……うむ。その気持ちがあるならよし。",
        "だいぶ反省の色は見えたな。次は気をつけろ。"
      ]), 'keibi');
    }
  }, 700);
}

input.addEventListener('keydown', e => {
  if (e.key === 'Enter') sendMessage();
});

// 初期メッセージ
appendMessage('警備員: さてと、よう犯罪者さんよ。お前にはここで態度を改めてもらう。', 'keibi');
</script>
</body>
</html>
